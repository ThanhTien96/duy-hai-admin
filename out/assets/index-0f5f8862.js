import{b as L,r as p,e as z,j as e,h as O,c as R,S as G,af as H,K as A,B as u,ag as $,ah as _,w as S,ai as U,z as m,y as v,k as w,l as o,M as n,m as t,aj as D,E as K,q as X,T as M,d as B,ak as V,P as Y,H as q,C as Z,f as J,g as Q,F as W,A as ee,R as F,o as y,p as I,v as se,al as ae,am as le,x as ie}from"./index-783c8751.js";import{S as re}from"./SettingFilled-150d9367.js";import{N as oe}from"./NewsForm-cfc4fcf4.js";import{t as k}from"./truncateText-9f1e7e52.js";import"./TextEditor-a629affa.js";const ne=({className:b})=>{const s=L(),x=new AbortController,[P,i]=p.useState(""),[g,f]=p.useState(!1),[d,c]=p.useState(""),[E,T]=p.useState(),{newsType:a}=z(l=>l.common.news),r=async l=>{s(m(!0));try{(await v.createNewsType(l,x.signal)).status===w.success&&(s(o({message:n.createSuccess,status:t.success})),s(D()))}catch(h){s(o({message:h.response.data.message??n.createFaild,status:t.error}))}finally{s(m(!1))}},N=async(l,h)=>{s(m(!0));try{(await v.updateNewsType(l,h)).status===w.success&&(s(o({message:n.updateSuccess,status:t.success})),s(D()))}catch(C){s(o({message:C.response.data.message??n.updateFaild,status:t.error}))}finally{s(m(!1))}},j=async l=>{s(m(!0));try{(await v.deleteNewsType(l)).status===w.success&&(s(o({message:n.deleteSuccess,status:t.success})),s(D()))}catch(h){s(o({message:h.response.data.message??n.deleteFaild,status:t.error}))}finally{s(m(!1))}};return e.jsxDEV(O,{size:"small",title:"Loại Tin Tức",className:R("w-full rounded-md",b),children:[a&&a.length>0?e.jsxDEV(G,{direction:"vertical",className:"w-full",children:a==null?void 0:a.map(l=>e.jsxDEV("div",{className:"border border-solid border-gray-400 p-2 flex items-center rounded-md cursor-pointer hover:border-gray-300",children:[E!==l.maLoaiTinTuc?e.jsxDEV(H,{color:"cyan",className:"w-full text-center text-lg",children:l.loaiTinTuc},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:132,columnNumber:17},globalThis):e.jsxDEV(A,{value:d,suffix:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{size:"small",type:"primary",onClick:()=>{c(""),i(""),T(void 0),d&&N(l.maLoaiTinTuc,{loaiTinTuc:d})},children:"Sửa"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:140,columnNumber:23},globalThis),e.jsxDEV(u,{onClick:()=>{c(""),i(""),T(void 0)},size:"small",children:"Huỷ"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:155,columnNumber:23},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:139,columnNumber:21},globalThis),onChange:h=>c(h.target.value),placeholder:"Nhập tên loại tin tức"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:136,columnNumber:17},globalThis),e.jsxDEV($,{content:e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV(u,{type:"primary",size:"small",onClick:()=>{c(l.loaiTinTuc),T(l.maLoaiTinTuc),i("")},children:"Sửa"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:174,columnNumber:21},globalThis),e.jsxDEV(_,{title:`Xoá loại Tin Tức: ${l.loaiTinTuc}`,description:"có chắc bán muốn xoá?",onConfirm:()=>{c(""),i(""),T(void 0),j(l.maLoaiTinTuc)},okText:"Có",cancelText:"Không",children:e.jsxDEV(u,{size:"small",danger:!0,children:"xoá"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:197,columnNumber:23},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:185,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:173,columnNumber:19},globalThis),trigger:"click",open:P===l.maLoaiTinTuc,onOpenChange:()=>i(""),children:e.jsxDEV(u,{onClick:()=>i(P.length>0?"":l.maLoaiTinTuc),icon:e.jsxDEV(re,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:209,columnNumber:25},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:207,columnNumber:17},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:171,columnNumber:15},globalThis)]},l.maLoaiTinTuc,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:127,columnNumber:13},globalThis))},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:125,columnNumber:9},globalThis):e.jsxDEV(S,{image:S.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:216,columnNumber:9},globalThis),g&&e.jsxDEV("div",{className:"flex items-center justify-between gap-4 mt-4",children:[e.jsxDEV(A,{suffix:e.jsxDEV(u,{size:"small",type:"primary",onClick:()=>{d&&r({loaiTinTuc:d}),c(""),f(!1)},children:"Thêm"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:222,columnNumber:15},globalThis),onChange:l=>c(l.target.value),placeholder:"Nhập tên loại tin tức"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:220,columnNumber:11},globalThis),e.jsxDEV(u,{onClick:()=>f(!1),children:"Hủy"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:238,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:219,columnNumber:9},globalThis),!g&&e.jsxDEV(u,{onClick:()=>f(!0),type:"dashed",className:"border border-dashed border-gray-300 shadow-none !w-full mt-4",children:[e.jsxDEV(U,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:247,columnNumber:11},globalThis),"Thêm"]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:242,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsType.tsx",lineNumber:119,columnNumber:5},globalThis)},{Text:te,Title:ce}=M,ue=({title:b,content:s,media:x,date:P,onClick:i,onDelete:g})=>e.jsxDEV("div",{className:"h-[200px] overflow-hidden flex gap-4 border border-solid border-gray-300 rounded-md cursor-pointer hover:shadow-md",children:[e.jsxDEV("div",{onClick:i,className:"h-full w-1/3 overflow-hidden",children:e.jsxDEV("img",{className:"w-full h-full object-cover transition-all duration-150 hover:scale-105",src:x??K,alt:b},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:28,columnNumber:9},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:27,columnNumber:7},globalThis),e.jsxDEV("div",{className:"p-4 pl-0 w-2/3 flex flex-col justify-between",children:[e.jsxDEV("div",{onClick:i,children:[e.jsxDEV(ce,{level:4,children:k(b??"",40)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:36,columnNumber:11},globalThis),e.jsxDEV(te,{children:k(s??"",150)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:37,columnNumber:11},globalThis),e.jsxDEV(X,{className:"text-right",description:P},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:38,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:35,columnNumber:9},globalThis),e.jsxDEV("div",{className:"flex gap-2 justify-end z-50",children:e.jsxDEV(_,{title:"Có chắc muốn xoá",onConfirm:g,okText:"Có",cancelText:"Không",children:e.jsxDEV(u,{size:"small",danger:!0,children:"Xoá"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:47,columnNumber:13},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:41,columnNumber:11},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:40,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:34,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/partials/NewsItem.tsx",lineNumber:26,columnNumber:5},globalThis),{Text:me}=M,be=()=>{const b=new AbortController,s=L(),x=B(),{pageLoading:P,newsList:i,pagination:g}=z(a=>a.common.news),[f,d]=p.useState(!1),c=p.useCallback(async(a,r,N)=>{try{await s(V({page:a,perPage:r,keyWord:N}))}catch(j){s(o({message:j.response.data.message||n.getAllFail,status:t.error}))}},[]);p.useEffect(()=>{s(D()),c(1)},[]);const E=async a=>{s(m(!0));const r=new FormData;r.append("tieuDe",a.tieuDe),r.append("noiDungNgan",a.noiDungNgan),r.append("maLoaiTinTuc",a.maLoaiTinTuc),r.append("noiDung",a.noiDung),r.append("maNguoiDang","f6d99c99-83f1-49ac-a685-0c959f86fedd"),a.hinhAnh&&a.hinhAnh.forEach(N=>{r.append("hinhAnh",N.originFileObj)});try{(await v.createNews(r,b.signal)).status===w.success&&(d(!1),s(o({message:n.createSuccess,status:t.success})),s(V({page:1})))}catch(N){s(o({message:N.response.data.message??n.createFaild,status:t.error}))}finally{s(m(!1))}},T=async a=>{s(m(!0));try{(await v.deleteNews(a)).status===w.success&&(s(o({message:n.deleteSuccess,status:t.success})),s(V({page:1})))}catch(r){s(o({message:r.response.data.message??n.deleteFaild,status:t.error}))}finally{s(m(!1))}};return e.jsxDEV(Y,{headerprops:{breadcrumb:{items:[{href:"/",title:e.jsxDEV(q,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:143,columnNumber:22},globalThis)},{title:e.jsxDEV(me,{children:location.pathname.replace("/","")},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:146,columnNumber:22},globalThis)}]},title:"Tin Tức"},footerprops:{children:Z,className:"text-center "},className:"bg-inherit",children:e.jsxDEV(J,{spinning:P,children:e.jsxDEV(Q,{className:"px-8",children:[e.jsxDEV(W,{justify:"end",children:e.jsxDEV(u,{onClick:()=>d(!0),type:"primary",icon:e.jsxDEV(ee,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:162,columnNumber:21},globalThis),children:[" ","Thêm Tin Tức"]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:159,columnNumber:13},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:157,columnNumber:11},globalThis),e.jsxDEV(F,{gutter:[32,32],className:"mt-8 relative",children:[e.jsxDEV(y,{span:24,xl:6,children:e.jsxDEV(ne,{className:"sticky top-0"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:172,columnNumber:15},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:171,columnNumber:13},globalThis),e.jsxDEV(y,{span:24,xl:18,children:e.jsxDEV(O,{className:"rounded-md",children:e.jsxDEV(F,{gutter:[32,32],children:i&&Array.isArray(i)&&i.length>0?e.jsxDEV(e.Fragment,{children:[i.map(a=>e.jsxDEV(y,{span:24,xl:12,children:e.jsxDEV(ue,{onDelete:()=>T(a.maTinTuc),onClick:()=>x(`/${I.news}/${I.newsDetail}/${a.maTinTuc}`),title:a.tieuDe,content:a.noiDungNgan,media:a.hinhAnh[0].hinhAnh,date:se(a.createAt).format("dddd dd/mm/yyyy")},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:183,columnNumber:27},globalThis)},a.maTinTuc,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:182,columnNumber:25},globalThis)),e.jsxDEV(y,{className:"text-center",span:24,children:e.jsxDEV(ae,{onChange:a=>c(a),defaultCurrent:1,total:g==null?void 0:g.total,pageSize:le.news},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:200,columnNumber:25},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:199,columnNumber:23},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:180,columnNumber:21},globalThis):e.jsxDEV(y,{span:24,className:"text-center",children:e.jsxDEV(S,{className:"text-center"},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:210,columnNumber:23},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:209,columnNumber:21},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:176,columnNumber:17},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:175,columnNumber:15},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:174,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:169,columnNumber:11},globalThis),e.jsxDEV(ie,{open:f,onClose:()=>d(!1),title:"Thêm Tin Tức",width:"40%",children:e.jsxDEV(oe,{resetForm:f,onSubmit:a=>E(a)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:225,columnNumber:13},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:219,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:156,columnNumber:9},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:155,columnNumber:7},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostPage.tsx",lineNumber:137,columnNumber:5},globalThis)};export{be as default};
