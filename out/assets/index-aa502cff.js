import{u as D,n as y,b as A,d as C,e as h,r as p,j as o,P as V,H as j,p as n,C as G,f as F,g as L,h as w,T as O,s as c,i as P,k as f,l as u,M as l,m}from"./index-783c8751.js";import{P as H}from"./ProductForm-61a80d32.js";import"./TextEditor-a629affa.js";import"./index-6f622855.js";const{Text:M}=O,_=()=>{D({title:"App - Cập Nhật Sản Phẩm"});const g=y(),t=A(),b=C(),{loading:E}=h(e=>e.common.product),{subCategoriesList:N}=h(e=>e.common.menu),T=new AbortController,[s,S]=p.useState();p.useEffect(()=>{const e=new AbortController,a=async(i,r)=>{t(c(!0));try{const d=await P.getProductDetail(i,r);d.status===f.success&&S(d.data.data)}catch{t(u({message:l.getDetailFaild,status:m.error}))}finally{t(c(!1))}};return g.id&&a(g.id,e.signal),()=>{e.abort()}},[]);const x=async e=>{var i;const a=new FormData;a.append("tenSanPham",e.tenSanPham),a.append("giaGoc",String(e.giaGoc)),e.giaGiam>0&&a.append("giaGiam",String(e.giaGiam)),e.tongSoLuong>0&&a.append("tongSoLuong",String(e.tongSoLuong)),a.append("moTa",e.moTa),a.append("moTaNgan",e.moTaNgan),a.append("maDanhMucNho",e.maDanhMucNho),a.append("seoTitle",e.seoTitle),a.append("seoDetail",e.seoDetail),a.append("youtubeVideo",e.youtubeVideo),e.hinhAnh&&((i=e.hinhAnh)==null||i.forEach(r=>{a.append("hinhAnh",r.originFileObj)})),t(c(!0));try{s&&(await P.updateProduct(s==null?void 0:s.maSanPham,a,T.signal)).status===f.success&&(t(u({message:l.updateSuccess,status:m.success})),b(`/${n.product}`))}catch{t(u({message:l.updateFaild,status:m.error}))}finally{t(c(!1))}};return o.jsxDEV(V,{headerprops:{breadcrumb:{items:[{href:"/",title:o.jsxDEV(j,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:119,columnNumber:22},globalThis)},{href:`/${n.product}`,title:n.product},{title:o.jsxDEV(M,{children:n.updateProduct},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:126,columnNumber:22},globalThis)}]},title:"Cập Nhật Sản Phẩm"},footerprops:{children:G,className:"text-center"},className:"bg-inherit h-auto",children:o.jsxDEV(F,{spinning:E,children:o.jsxDEV(L,{className:"px-8",children:o.jsxDEV(w,{className:"rounded-none",children:o.jsxDEV(H,{defaultValue:s,getFormValue:e=>x(e),subCategories:N},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:141,columnNumber:13},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:140,columnNumber:11},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:139,columnNumber:9},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:138,columnNumber:7},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/ProductPage/EditProductPage/EditProductPage.tsx",lineNumber:113,columnNumber:5},globalThis)},I=_;export{I as default};
