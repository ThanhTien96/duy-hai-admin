import{b as v,n as V,r as p,j as e,P as A,H as S,p as D,C as _,F as C,B as F,A as M,f as R,R as O,o as N,h as b,I as f,E as Y,q as x,v as I,w as L,x as H,T as k,y,k as T,l as r,M as c,m as d,z as E}from"./index-783c8751.js";import{N as G}from"./NewsForm-cfc4fcf4.js";import"./TextEditor-a629affa.js";const{Text:j,Title:U}=k;function z(t,n){const{type:a,payload:i}=n;switch(a){case"fetch_detail":return{...t,data:i};case"loading":return{...t,loading:i};case"open_drawer":return{...t,openDrawer:i};default:return t}}const B=()=>{var m,h,g,P;const t=v(),n=V(),[a,i]=p.useReducer(z,{data:void 0,loading:!1,openDrawer:!1}),u=async(s,l)=>{i({type:"loading",payload:!0});try{const o=await y.fetchNewsDetail(s,l);o.status===T.success&&i({type:"fetch_detail",payload:o.data.data})}catch{t(r({message:c.getDetailFaild,status:d.error}))}finally{i({type:"loading",payload:!1})}};p.useEffect(()=>{const s=new AbortController;return n.id&&u(n.id,s.signal),()=>{s.abort()}},[]);const w=async s=>{t(E(!0));const l=new FormData;l.append("tieuDe",s.tieuDe),l.append("noiDungNgan",s.noiDungNgan),l.append("maLoaiTinTuc",s.maLoaiTinTuc),l.append("noiDung",s.noiDung),l.append("maNguoiDang","f6d99c99-83f1-49ac-a685-0c959f86fedd"),s.hinhAnh&&s.hinhAnh.forEach(o=>{l.append("hinhAnh",o.originFileObj)});try{n.id&&(await y.updateNews(n.id,l)).status===T.success&&(t(r({message:c.updateSuccess,status:d.success})),u(n.id),i({type:"open_drawer",payload:!1}))}catch(o){t(r({message:o.response.data.message??c.updateFaild,status:d.error}))}finally{t(E(!1))}};return e.jsxDEV(A,{headerprops:{breadcrumb:{items:[{href:"/",title:e.jsxDEV(S,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:149,columnNumber:22},globalThis)},{href:`/${D.news}`,title:e.jsxDEV(j,{children:D.news},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:153,columnNumber:22},globalThis)},{title:e.jsxDEV(j,{children:location.pathname.split("/")[2]},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:156,columnNumber:22},globalThis)}]},title:"Trang Chi Tiết Tin Tức"},footerprops:{children:_,className:"text-center "},className:"bg-inherit",children:[e.jsxDEV(C,{justify:"end",children:e.jsxDEV(F,{onClick:()=>{i({type:"open_drawer",payload:!0})},type:"primary",icon:e.jsxDEV(M,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:171,columnNumber:17},globalThis),children:[" ","Chỉnh Sửa"]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:166,columnNumber:9},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:165,columnNumber:7},globalThis),e.jsxDEV(R,{spinning:a.loading,children:a.data?e.jsxDEV(O,{className:"mt-4",gutter:[32,32],children:[e.jsxDEV(N,{span:24,xl:12,children:e.jsxDEV(b,{children:[e.jsxDEV(f,{className:"object-bottom",width:"100%",height:400,loading:"lazy",src:a.data&&a.data.hinhAnh.length>0?a.data.hinhAnh[0].hinhAnh:Y},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:183,columnNumber:17},globalThis),a.data&&a.data.hinhAnh.length>1&&e.jsxDEV("div",{className:"flex gap-4 items-center mt-4",children:a.data&&a.data.hinhAnh.length>0&&a.data.hinhAnh.slice(1).map(s=>e.jsxDEV(f,{width:250,height:150,src:s.hinhAnh,alt:"nong co hai tra tan"},s.id,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:201,columnNumber:27},globalThis))},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:195,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:182,columnNumber:15},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:181,columnNumber:13},globalThis),e.jsxDEV(N,{span:24,xl:12,children:e.jsxDEV(b,{children:[e.jsxDEV("div",{className:"mb-4 text-right",children:e.jsxDEV(x,{description:I((m=a.data)==null?void 0:m.createAt).format("dddd DD-MM-YYYY")},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:216,columnNumber:19},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:215,columnNumber:17},globalThis),e.jsxDEV(U,{level:2,className:"!text-[18px]",children:(h=a.data)==null?void 0:h.tieuDe},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:222,columnNumber:17},globalThis),e.jsxDEV(x,{className:"!mt-4",title:"Mô Tả Ngắn: ",description:(g=a.data)==null?void 0:g.noiDungNgan},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:225,columnNumber:17},globalThis),e.jsxDEV("div",{className:"mt-8",dangerouslySetInnerHTML:{__html:((P=a.data)==null?void 0:P.noiDung)??""}},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:230,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:214,columnNumber:15},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:213,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:180,columnNumber:11},globalThis):e.jsxDEV(L,{},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:240,columnNumber:11},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:178,columnNumber:7},globalThis),e.jsxDEV(H,{title:"Sửa Tin Tức",width:"40%",open:a.openDrawer,onClose:()=>{i({type:"open_drawer",payload:!1})},children:e.jsxDEV(G,{resetForm:a.openDrawer,onSubmit:s=>w(s),defaultValue:a.data},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:252,columnNumber:9},globalThis)},void 0,!1,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:244,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/home/dsu792/source/learn-technical/duy-hai-admin/src/pages/PostPage/PostDetail/PostDetail.tsx",lineNumber:143,columnNumber:5},globalThis)},J=B;export{J as default};
